diff --git a/src/Util/Getopt.php b/src/Util/Getopt.php
index ba21be3fa..aa1756105 100644
--- a/src/Util/Getopt.php
+++ b/src/Util/Getopt.php
@@ -35,7 +35,9 @@ public static function getopt(array $args, $short_options, $long_options = null)
         reset($args);
         array_map('trim', $args);
 
-        while (list($i, $arg) = each($args)) {
+        while (false !== $arg = current($args)) {
+            $i = key($args);
+            next($args);
             if ($arg == '') {
                 continue;
             }
@@ -94,8 +96,7 @@ protected static function parseShortOption($arg, $short_options, &$opts, &$args)
                     if ($i + 1 < $argLen) {
                         $opts[] = array($opt, substr($arg, $i + 1));
                         break;
-                    } elseif (list(, $opt_arg) = each($args)) {
-                    } else {
+                    } elseif (false === $opt_arg = next($args)) {
                         throw new PHPUnit_Framework_Exception(
                             "option requires an argument -- $opt"
                         );
@@ -139,11 +140,12 @@ protected static function parseLongOption($arg, $long_options, &$opts, &$args)
 
             if (substr($long_opt, -1) == '=') {
                 if (substr($long_opt, -2) != '==') {
-                    if (!strlen($opt_arg) &&
-                        !(list(, $opt_arg) = each($args))) {
-                        throw new PHPUnit_Framework_Exception(
-                            "option --$opt requires an argument"
-                        );
+                    if (!strlen($opt_arg)) {
+                        if (false === $opt_arg = next($args)) {
+                            throw new Exception(
+                                "option --$opt requires an argument"
+                            );
+                        }
                     }
                 }
             } elseif ($opt_arg) {
